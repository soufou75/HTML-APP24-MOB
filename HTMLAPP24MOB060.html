<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML : APP24/MOB</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <style>
      	*,
*:before,
*:after{
    padding: 0;
    margin: 0;
    box-sizing: border-box;
}
body{
    height: 100vh;
    background: #220c83;
}
.container{
    background-color: #ffffff;
    padding: 30px 30px;
    width: 400px;
    position: absolute;
    transform: translate(-50%,-50%);
    top: 50%;
    left: 50%;
    border-radius: 5px;
    font-family: 'Poppins',sans-serif;
    box-shadow: 25px 25px 30px rgba(0,0,0,0.15);
}
.container h1{
	background: #da810d;
	color: white;
	text-align: center;
	font-size: 23px;
	letter-spacing: 1px;
	margin-top: -30px;
	margin-left: -30px;
	margin-right: -30px;
	margin-bottom: 40px;
}

input[type="date"]{
    width: 85%;
    height: 30px;
    -webkit-appearance: none;
    appearance: none;
    background-color: #dcdcdc;
    border-radius: 3px;
    outline: none;
    font-size: large;
}
input[type="number"]{
    width: 85%;
    height: 30px;
    background-color: #dcdcdc;
    border-radius: 3px;
    cursor: pointer;
    font-size: large;
}
input[type="text"]{
    width: 85%;
    height: 30px;
    background-color: #dcdcdc;
    border-radius: 3px;
    cursor: pointer;
    font-size: large;
}


.button-64 {
  align-items: center;
  background-image: linear-gradient(144deg,#AF40FF, #5B42F3 50%,#00DDEB);
  border: 0;
  border-radius: 8px;
  box-shadow: rgba(151, 65, 252, 0.2) 0 15px 30px -5px;
  box-sizing: border-box;
  color: #FFFFFF;
  display: flex;
  font-family: Phantomsans, sans-serif;
  font-size: 20px;
  justify-content: center;
  line-height: 1em;
  max-width: 100%;
  min-width: 140px;
  padding: 3px;
  text-decoration: none;
  user-select: none;
  -webkit-user-select: none;
  touch-action: manipulation;
  white-space: nowrap;
  cursor: pointer;
}

.button-64:active,
.button-64:hover {
  outline: 0;
}

.button-64 span {
  background-color: rgb(5, 6, 45);
  padding: 16px 24px;
  border-radius: 6px;
  width: 100%;
  height: 100%;
  transition: 300ms;
}

.button-64:hover span {
  background: none;
}

@media (min-width: 768px) {
  .button-64 {
    font-size: 24px;
    min-width: 196px;
  }
}


.display{
box-shadow: 0 0 20px rgba(0,139,253,0.25);
margin-bottom: 60px;
}

    </style>
</head>
<body>
  
    <form class="container" onsubmit="pregnancyCalc(this); return false">
      <h1>حاسبة الحمل</h1>
        <div class="form-group">
           <label for="inputa">
               <span color="#000080" style="color: #000080;">تاريخ آخر دورة شهرية:</span><br>
        <div id="small">(مثال: 23/03/2015)</div>
        <img style="display:none" src="https://d33rxv6e3thba6.cloudfront.net/2015/4/553fc4f5cefc17000060d186/686-vn2e3p.png"></label> 
        <input type="date" id="inputa" name="menstrual" value="" size="" maxlength="">
            </div>    
        <div class="form-group">
           <label for="inputb">
               متوسط طول دورة<br>  </label> 
        <input type="number" id="cycle" name="cycle" placeholder=" 22-45 يوم" size="" maxlength="3">
            </div>    
           <div class="form-group">
           <label for="inputb">
              يوم الحيض :</label> <br>
        <input type="number" id="luteal" name="luteal" value="14" size="" maxlength="3">
            </div>  
         <input type="submit"  class="button-64" value="احسب">       
          <div class="form-group">
           <label><span color="#800000" style="color: #800000;">التلقيح:</span></label> <br>
        <input type="text" name="conception" readonly="" disable="disable" value="" size="20">    </div>   
        
          <div class="form-group">
           <label><span color="#800000" style="color: #800000;">تاريخ الولادة المقدرة:</span></label> 
        <input type="text" name="duedate" readonly="" disable="disable" value="" size="20">    </div>   
        <div class="form-group">
           <label><span color="#800000" style="color: #800000;">أسابيع من عمر الحمل:</span></label> 
        <input type="text" disable="disable" readonly="" name="fetalage" value="">    </div>   
        
        
        </form>
    
        <script>setTimeout(function() {
            return;
            var body = $("html, body");
            if ($('#MP65').offset().top - $(window).height() > 0){
            body.stop().animate({scrollTop:$('#MP65').offset().top - $(window).height() + 60 }, 500, 'swing', function() { 
                //alert("Finished animating");
            });
            }
            // while($(document).scrollTop() + $(window).height() - 60 < $('#MP65').offset().top){
            //     $(document).scrollTop($(document).scrollTop() + 4)
            // }
        
        }, 2 * 1000);
        
        function isMobile(){
                // credit to Timothy Huang for this regex test: 
                // https://dev.to/timhuang/a-simple-way-to-detect-if-browser-is-on-a-mobile-device-with-javascript-44j3
                if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){
                    return true
               }
               else{
                    return false
               }
             
        }
        
          
        if (0 && isMobile()){
         
           
            var s = document.createElement('script'); // Create a script element
            s.type = "text/javascript";               // optional in html5
            s.async = true;                           // asynchronous? true/false
            s.src = "https://www.adfalcon.com/static/js/getad-web-all-1.0.0.js"; 
            var fs = document.getElementsByTagName('script')[0];  // Get the first script
            fs.parentNode.insertBefore(s, fs);
        
        }
       
         
        var datePickerDivID = "datepicker";
        var iFrameDivID = "datepickeriframe";
         
        var dayArrayMed = new Array('Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat');
        var dayArrayLong = new Array('Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday');
        var monthArrayShort = new Array('Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec');
        var monthArrayMed = new Array('Jan', 'Feb', 'Mar', 'Apr', 'May', 'June', 'July', 'Aug', 'Sept', 'Oct', 'Nov', 'Dec');
         
       
        var defaultDateSeparator = "/";        // common values would be "/" or "."
        var defaultDateFormat = "dmy"    // valid values are "mdy", "dmy", and "ymd"
        var DateFormat1 = "dmy"    // valid values are "mdy", "dmy", and "ymd"
        var dateSeparator = defaultDateSeparator;
        var dateFormat = defaultDateFormat;
         
        
        function displayDatePicker(dateFieldName, displayBelowThisObject, dtFormat, dtSep)
        {
          var targetDateField = document.getElementsByName (dateFieldName).item(0);
         
          // if we weren't told what node to display the datepicker beneath, just display it
          // beneath the date field we're updating
          if (!displayBelowThisObject)
            displayBelowThisObject = targetDateField;
         
          // if a date separator character was given, update the dateSeparator variable
          if (dtSep)
            dateSeparator = dtSep;
          else
            dateSeparator = defaultDateSeparator;
         
          // if a date format was given, update the dateFormat variable
          if (dtFormat)
            dateFormat = dtFormat;
          else
            dateFormat = defaultDateFormat;
         
          var x = displayBelowThisObject.offsetLeft;
          var y = displayBelowThisObject.offsetTop + displayBelowThisObject.offsetHeight ;
         
          // deal with elements inside tables and such
          var parent = displayBelowThisObject;
          while (parent.offsetParent) {
            parent = parent.offsetParent;
            x += parent.offsetLeft;
            y += parent.offsetTop ;
          }
         
          drawDatePicker(targetDateField, x, y);
        }
         
         
       
        function drawDatePicker(targetDateField, x, y)
        {
          var dt = getFieldDate(targetDateField.value );
         
         
          if (!document.getElementById(datePickerDivID)) {
           
            var newNode = document.createElement("div");
            newNode.setAttribute("id", datePickerDivID);
            newNode.setAttribute("class", "dpDiv");
            newNode.setAttribute("style", "visibility: hidden;");
            document.body.appendChild(newNode);
          }
         
         
          var pickerDiv = document.getElementById(datePickerDivID);
          pickerDiv.style.position = "absolute";
          pickerDiv.style.left = x + "px";
          pickerDiv.style.top = y + "px";
          pickerDiv.style.visibility = (pickerDiv.style.visibility == "visible" ? "hidden" : "visible");
          pickerDiv.style.display = (pickerDiv.style.display == "block" ? "none" : "block");
          pickerDiv.style.zIndex = 10000;
         
         
          refreshDatePicker(targetDateField.name, dt.getFullYear(), dt.getMonth(), dt.getDate());
        }
         
       
        function refreshDatePicker(dateFieldName, year, month, day)
        {
          // if no arguments are passed, use today's date; otherwise, month and year
          // are required (if a day is passed, it will be highlighted later)
          var thisDay = new Date();
         
          if ((month >= 0) && (year > 0)) {
            thisDay = new Date(year, month, 1);
          } else {
            day = thisDay.getDate();
            thisDay.setDate(1);
          }
         
          // the calendar will be drawn as a table
          // you can customize the table elements with a global CSS style sheet,
          // or by hardcoding style and formatting elements below
          var crlf = "\r\n";
          var TABLE = "<table cols=7 class='dpTable'>" + crlf;
          var xTABLE = "</table>" + crlf;
          var TR = "<tr class='dpTR'>";
          var TR_title = "<tr class='dpTitleTR'>";
          var TR_days = "<tr class='dpDayTR'>";
          var TR_todaybutton = "<tr class='dpTodayButtonTR'>";
          var xTR = "</tr>" + crlf;
          var TD = "<td class='dpTD' onMouseOut='this.className=\"dpTD\";' onMouseOver=' this.className=\"dpTDHover\";' ";    // leave this tag open, because we'll be adding an onClick event
          var TD_title = "<td colspan=5 class='dpTitleTD'>";
          var TD_buttons = "<td class='dpButtonTD'>";
          var TD_todaybutton = "<td colspan=7 class='dpTodayButtonTD'>";
          var TD_days = "<td class='dpDayTD'>";
          var TD_selected = "<td class='dpDayHighlightTD' onMouseOut='this.className=\"dpDayHighlightTD\";' onMouseOver='this.className=\"dpTDHover\";' ";    // leave this tag open, because we'll be adding an onClick event
          var xTD = "</td>" + crlf;
          var DIV_title = "<div class='dpTitleText'>";
          var DIV_selected = "<div class='dpDayHighlight'>";
          var xDIV = "</div>";
         
          // start generating the code for the calendar table
          var html = TABLE;
         
          // this is the title bar, which displays the month and the buttons to
          // go back to a previous month or forward to the next month
          html += TR_title;
          html += TD_buttons + getButtonCode(dateFieldName, thisDay, -1, "<") + xTD;
          html += TD_title + DIV_title + monthArrayMed[ thisDay.getMonth()] + " " + thisDay.getFullYear() + xDIV + xTD;
          html += TD_buttons + getButtonCode(dateFieldName, thisDay, 1, ">") + xTD;
          html += xTR;
         
          // this is the row that indicates which day of the week we're on
          html += TR_days;
          for(i = 0; i < dayArrayLong.length; i++)
            html += TD_days + dayArrayLong[i] + xTD;
          html += xTR;
         
          // now we'll start populating the table with days of the month
          html += TR;
         
          // first, the leading blanks
          for (i = 0; i < thisDay.getDay(); i++)
            html += TD + " " + xTD;
         
          // now, the days of the month
          do {
            dayNum = thisDay.getDate();
            TD_onclick = " onclick=\"updateDateField('" + dateFieldName + "', '" + getDateString(thisDay) + "');\">";
            
            if (dayNum == day)
              html += TD_selected + TD_onclick + DIV_selected + dayNum + xDIV + xTD;
            else
              html += TD + TD_onclick + dayNum + xTD;
            
            // if this is a Saturday, start a new row
            if (thisDay.getDay() == 6)
              html += xTR + TR;
            
            // increment the day
            thisDay.setDate(thisDay.getDate() + 1);
          } while (thisDay.getDate() > 1)
         
          // fill in any trailing blanks
          if (thisDay.getDay() > 0) {
            for (i = 6; i > thisDay.getDay(); i--)
              html += TD + " " + xTD;
          }
          html += xTR;
         
          // add a button to allow the user to easily return to today, or close the calendar
          var today = new Date();
          var todayString = "Today is " + dayArrayMed[today.getDay()] + ", " + monthArrayMed[ today.getMonth()] + " " + today.getDate();
          html += TR_todaybutton + TD_todaybutton;
          html += "<button class='dpTodayButton' onClick='refreshDatePicker(\"" + dateFieldName + "\");'>الشهر الحالي</button> ";
          html += "<button class='dpTodayButton' onClick='updateDateField(\"" + dateFieldName + "\");'>أغلق</button>";
          html += xTD + xTR;
         
          // and finally, close the table
          html += xTABLE;
         
          document.getElementById(datePickerDivID).innerHTML = html;
          // add an "iFrame shim" to allow the datepicker to display above selection lists
          adjustiFrame();
        }
         
         
        /**
        Convenience function for writing the code for the buttons that bring us back or forward
        a month.
        */
        function getButtonCode(dateFieldName, dateVal, adjust, label)
        {
          var newMonth = (dateVal.getMonth () + adjust) % 12;
          var newYear = dateVal.getFullYear() + parseInt((dateVal.getMonth() + adjust) / 12);
          if (newMonth < 0) {
            newMonth += 12;
            newYear += -1;
          }
         
          return "<button class='dpButton' onClick='refreshDatePicker(\"" + dateFieldName + "\", " + newYear + ", " + newMonth + ");'>" + label + "</button>";
        }
         
         
        /**
        Convert a JavaScript Date object to a string, based on the dateFormat and dateSeparator
        variables at the beginning of this script library.
        */
        function getDateString(dateVal)
        {
          var dayString = "00" + dateVal.getDate();
          var monthString = "00" + (dateVal.getMonth()+1);
          dayString = dayString.substring(dayString.length - 2);
          monthString = monthString.substring(monthString.length - 2);
         
          switch (dateFormat) {
            case "dmy" :
              return dayString + dateSeparator + monthString + dateSeparator + dateVal.getFullYear();
            case "ymd" :
              return dateVal.getFullYear() + dateSeparator + monthString + dateSeparator + dayString;
            case "mdy" :
            default :
              return monthString + dateSeparator + dayString + dateSeparator + dateVal.getFullYear();
          }
        }
         
         
        /**
        Convert a string to a JavaScript Date object.
        */
        function getFieldDate(dateString)
        {
          var dateVal;
          var dArray;
          var d, m, y;
         
          try {
            dArray = splitDateString(dateString);
            if (dArray) {
              switch (dateFormat) {
                case "dmy" :
                  d = parseInt(dArray[0], 10);
                  m = parseInt(dArray[1], 10) - 1;
                  y = parseInt(dArray[2], 10);
                  break;
                case "ymd" :
                  d = parseInt(dArray[2], 10);
                  m = parseInt(dArray[1], 10) - 1;
                  y = parseInt(dArray[0], 10);
                  break;
                case "mdy" :
                default :
                  d = parseInt(dArray[1], 10);
                  m = parseInt(dArray[0], 10) - 1;
                  y = parseInt(dArray[2], 10);
                  break;
              }
              dateVal = new Date(y, m, d);
            } else if (dateString) {
              dateVal = new Date(dateString);
            } else {
              dateVal = new Date();
            }
          } catch(e) {
            dateVal = new Date();
          }
         
          return dateVal;
        }
         
         
        /**
        Try to split a date string into an array of elements, using common date separators.
        If the date is split, an array is returned; otherwise, we just return false.
        */
        function splitDateString(dateString)
        {
          var dArray;
          if (dateString.indexOf("/") >= 0)
            dArray = dateString.split("/");
          else if (dateString.indexOf(".") >= 0)
            dArray = dateString.split(".");
          else if (dateString.indexOf("-") >= 0)
            dArray = dateString.split("-");
          else if (dateString.indexOf("\\") >= 0)
            dArray = dateString.split("\\");
          else
            dArray = false;
         
          return dArray;
        }
         
  
        function updateDateField(dateFieldName, dateString)
        {
          var targetDateField = document.getElementsByName (dateFieldName).item(0);
          if (dateString)
            targetDateField.value = dateString;
         
          var pickerDiv = document.getElementById(datePickerDivID);
          pickerDiv.style.visibility = "hidden";
          pickerDiv.style.display = "none";
         
          adjustiFrame();
          targetDateField.focus();
         
          // after the datepicker has closed, optionally run a user-defined function called
          // datePickerClosed, passing the field that was just updated as a parameter
          // (note that this will only run if the user actually selected a date from the datepicker)
          if ((dateString) && (typeof(datePickerClosed) == "function"))
            datePickerClosed(targetDateField);
        }
         
         
        /**
        Use an "iFrame shim" to deal with problems where the datepicker shows up behind
        selection list elements, if they're below the datepicker. The problem and solution are
        described at:
         
        http://dotnetjunkies.com/WebLog/jking/archive/2003/07/21/488.aspx
        http://dotnetjunkies.com/WebLog/jking/archive/2003/10/30/2975.aspx
        */
        function adjustiFrame(pickerDiv, iFrameDiv)
        {
          // we know that Opera doesn't like something about this, so if we
          // think we're using Opera, don't even try
          var is_opera = (navigator.userAgent.toLowerCase().indexOf("opera") != -1);
          if (is_opera)
            return;
          
          // put a try/catch block around the whole thing, just in case
          try {
            if (!document.getElementById(iFrameDivID)) {
              // don't use innerHTML to update the body, because it can cause global variables
              // that are currently pointing to objects on the page to have bad references
              //document.body.innerHTML += "<iframe id='" + iFrameDivID + "' src='javascript:false;' scrolling='no' frameborder='0'>";
              var newNode = document.createElement("iFrame");
              newNode.setAttribute("id", iFrameDivID);
              newNode.setAttribute("src", "javascript:false;");
              newNode.setAttribute("scrolling", "no");
              newNode.setAttribute ("frameborder", "0");
              document.body.appendChild(newNode);
            }
            
            if (!pickerDiv)
              pickerDiv = document.getElementById(datePickerDivID);
            if (!iFrameDiv)
              iFrameDiv = document.getElementById(iFrameDivID);
            
            try {
              iFrameDiv.style.position = "absolute";
              iFrameDiv.style.width = pickerDiv.offsetWidth;
              iFrameDiv.style.height = pickerDiv.offsetHeight ;
              iFrameDiv.style.top = pickerDiv.style.top;
              iFrameDiv.style.left = pickerDiv.style.left;
              iFrameDiv.style.zIndex = pickerDiv.style.zIndex - 1;
              iFrameDiv.style.visibility = pickerDiv.style.visibility ;
              iFrameDiv.style.display = pickerDiv.style.display;
            } catch(e) {
            }
         
          } catch (ee) {
          }
         
        }
         
         
        // ]]>
        

        function isValidDate(dateStr) {
        // Date validation function courtesty of 
        // Sandeep V. Tamhankar (stamhankar@hotmail.com) --> 
         
        // Checks for the following valid date formats:
        // MM/DD/YY   MM/DD/YYYY   MM-DD-YY   MM-DD-YYYY
         
        var datePat = /^(\d{1,2})(\/|-)(\d{1,2})\2(\d{4})$/; // requires 4 digit year
         
        var matchArray = dateStr.match(datePat); // is the format ok?
        if (matchArray == null) {
        alert("تاريخ غير صالحة")
        return false;
        }
        month = matchArray[3]; // parse date into variables
        day = matchArray[1];
        year = matchArray[4];
        if (month < 1 || month > 12) { // check month range
        alert("تاريخ غير صالحة");
        return false;
        }
        if (day < 1 || day > 31) {
        alert("تاريخ غير صالحة");
        return false;
        }
        if ((month==4 || month==6 || month==9 || month==11) && day==31) {
        alert("Month "+month+" doesn't have 31 days!")
        return false;
        }
        if (month == 2) { // check for february 29th
        var isleap = (year % 4 == 0 && (year % 100 != 0 || year % 400 == 0));
        if (day>29 || (day==29 && !isleap)) {
        alert("February " + year + " doesn't have " + day + " days!");
        return false;
           }
        }
        return true;
        }
         
        function dispDate(dateObj) {
            return dateObj.toLocaleDateString()
        month = dateObj.getMonth()+1;
        month = (month < 10) ? "0" + month : month;
         
        day   = dateObj.getDate();
        day = (day < 10) ? "0" + day : day;
         
        year  = dateObj.getYear();
        if (year < 2000) year += 1900;
         
        return (day + "/" + month + "/" + year);
        }
       

        function pregnancyCalc(pregform) {
            
        menstrual = new Date(); // creates new date objects
        ovulation = new Date();
        duedate = new Date();
        today = new Date();
        cycle = 0, luteal = 0; // sets variables to invalid state ==> 0
         
        if (pregform.menstrual.value) { // Validates menstual date 
        menstrualinput = new Date(pregform.menstrual.value);
        menstrual.setTime(menstrualinput.getTime())
        }
        else {alert("تاريخ غير صالحة"); return false; }// otherwise exits
         
        cycle = (pregform.cycle.value == "" ? 28 : pregform.cycle.value); // defaults to 28
        // validates cycle range, from 22 to 45
        if (pregform.cycle.value != "" && (pregform.cycle.value < 22 || pregform.cycle.value > 45)) {
        alert("Your cycle length is either too short or too long for \n"
        + "calculations to be very accurate!  We will still try to \n"
        + "complete the calculation with the figure you entered. ");
        }
         
        luteal = (pregform.luteal.value == "" ? 14 : pregform.luteal.value); // defaults to 14
        // validates luteal range, from 9 to 16
        if (pregform.luteal.value != "" && (pregform.luteal.value < 9 || pregform.luteal.value > 16)) {
        alert("Your luteal phase length is either too short or too long for \n"
        + "calculations to be very accurate!  We will still try to complete \n"
        + "the calculation with the figure you entered. ");
        }
         
        // sets ovulation date to menstrual date + cycle days - luteal days
        // the '*86400000' is necessary because date objects track time
        // in milliseconds;  86400000 milliseconds equals one day
        ovulation.setTime(menstrual.getTime() + (cycle*86400000) - (luteal*86400000));
        pregform.conception.value = dispDate(ovulation);
         
        // sets due date to ovulation date plus 266 days
        duedate.setTime(ovulation.getTime() + 266*86400000);
        pregform.duedate.value = dispDate(duedate);
         
        // sets fetal age to 14 + 266 (pregnancy time) - time left
        var fetalage = 14 + 266 - ((duedate - today) / 86400000);
        weeks = parseInt(fetalage / 7); // sets weeks to whole number of weeks
        days = Math.floor(fetalage % 7); // sets days to the whole number remainder
         
        // fetal age message, automatically includes 's' on week and day if necessary
        fetalage = weeks + " أسابيع" + ", " + days + " أيام";
        pregform.fetalage.value = fetalage;
         
        return false; // form should never submit, returns false
        }
        //  End
        // ]]>
        
        
        $(function (){
            ["menstrual", "", "luteal"].forEach(function (n){
        if (localStorage.getItem(n)){
        $('[name="' + n + '"]').val(localStorage.getItem(n))
        }
        })
        
        $('[name="menstrual"], [name="cycle"], [name="luteal"]').on('blur change', function (){
        localStorage.setItem(this.name, this.value)
        })
            
            
        })</script>
</body>
</html>

